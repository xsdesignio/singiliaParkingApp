import base64 from "react-native-base64";


const margin = '\n\r\n\r'
// const divider = '------------------------'



const logo_hex = "\x00\x00\x01\x80\x00\x00\x00\x00\x00\x00\x07\xe0\x00\x00\x00\x00\x00\x00\x07\xf0\x00\x00\x00\x00\x00\x00\x0f\xf8\x00\x00\x00\x00\x00\x00\x0f\xf0\x00\x00\x00\x00\x00\x00\x0f\xf8\x00\x00\x00\x00\x00\x00\x8f\xf0\x00\x00\x00\x00\x00\x00\x47\xf0\x00\x00\x00\x00\x00\x00\x63\xe0\x00\x00\x00\x00\x00\x00\x30\x80\x00\x00\x00\x00\x00\x00\x30\x00\x00\x00\x00\x00\x00\x00\x38\x00\x00\x00\x00\x00\x00\x00\x1c\x00\x00\x00\x00\x00\x00\x00\x1c\x00\x00\x00\x00\x00\x00\x00\x1c\x00\x00\x00\x00\x00\x00\x00\x0e\x00\x00\x00\x00\x00\x00\x00\x0e\x00\x00\x00\x00\x00\x00\x00\x0f\x00\x00\x00\x00\x00\x00\x00\x0f\x00\x00\x00\x00\x00\x00\x00\x07\x00\x00\x00\x00\x00\x00\x00\x07\x80\x00\x00\x00\x00\x00\x00\x07\x80\x00\x00\x00\x00\x00\x00\x07\x80\x00\x00\x00\x00\x00\x00\x07\xc0\x00\x00\x00\x00\x00\x00\x03\xc0\x00\x00\x00\x00\x00\x00\x07\xc0\x00\x00\x00\x00\x00\x00\x03\xc0\x00\x00\x00\x00\x00\x00\x03\xc0\x00\x00\x00\x00\x00\x00\x03\xe0\x00\x00\x00\x00\x00\x00\x03\xe0\x00\x00\x00\x00\x00\x00\x03\xe0\x00\x00\x00\x00\x00\x00\x07\xf4\x00\x00\x00\x00\x00\x00\x03\xff\xe0\x00\x00\x00\x00\x00\x07\xff\xfc\x00\x00\x00\x00\x00\x03\xd2\xff\x00\x00\x00\x00\x00\x06\x00\x0f\xc0\x00\x00\x00\x00\x00\x04\x43\xf0\x00\x00\x00\x00\x00\x20\x08\xf8\x00\x00\x00\x00\x01\x22\x40\x3c\x00\x00\x00\x00\x08\x02\x90\x0e\x00\x00\x00\x00\x05\x80\x00\x07\x00\x00\x00\x00\x00\x00\x28\x81\x80\x00\x00\x00\x22\x00\x03\x01\x80\x00\x00\x00\x20\x00\x02\x00\x40\x00\x00\x00\x0c\x00\x00\x00\x60\x00\x00\x00\x10\x00\x01\x50\x10\x00\x00\x00\x60\x00\x00\x60\x00\x00\x00\x00\x80\x00\x00\x40\x08\x00\x00\x00\x10\x00\x00\x80\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x18\x00\x00\x00\x00\x00\x00\x00\x24\x00\x02\x00\x00\x00\x00\x00\x48\x00\x03\x40\x00\x00\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x10\x80\x51\x00\x00\x00\x00\x00\x01\x0a\x40\x00\x00\x00\x00\x00\x01\x88\x28\x00\x00\x00\x00\x00\x00\x0a\x20\x00\x00\x00\x00\x00\x00\x8a\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"


export function createEncodedTicketToBePrinted(data) {
    
    let dataToSend = '\x1B\x21\x30';
    dataToSend += '\x1B\x45\x01'; 
    dataToSend += "Servicio Municipal de\nEstacionamientos Regulados";
    dataToSend += '\x1B\x45\x00'; 
    dataToSend += margin;

    dataToSend += '\x1B\x21\x20'; 

    Object.entries(data).forEach(([key, value]) => {
        dataToSend += (key + ": " + value + "\n");
    });

    dataToSend += margin;  

    return base64.encode(dataToSend);
}


export function encodedSingiliaBarbaInfoToBePrinted() {

    let dataToSend = '\x1B\x21\x00';

    dataToSend += "Por SINGILIA BARBA A.M.A:\n";

    dataToSend += "C.I.F.G 29.642.444\n";
    dataToSend += "Bda. Los Dólmenes (C.A.R), Bloque 1 - bajo\n";
    dataToSend += "Tlf./Fax: 952 70 17 70\n";
    dataToSend += "www.singiliabarba.org\n";

    dataToSend += margin;

    return base64.encode(dataToSend);

}


export function encodedLegalInfoToBePrinted() {

    let dataToSend = '\x1B\x21\x00';

    dataToSend += "Información legal:\n";

    dataToSend += "-Pago Obligatorio (Ordenanza Municipal núm.20).\n";
    dataToSend += "-El boleto deberá situarse en un lugar visible.\n";
    dataToSend += "-No se garantizan los objetos dejados en el \ninterior del vehículo, accesorios exteriores, \nrobos, incendios, ni daños causados \ncon propósito de hurto. \n";

    dataToSend += margin.repeat(2);

    return base64.encode(dataToSend);

}




export function encodedLogoToBePrinted() {
    const IMAGE_WIDTH = 64; // Adjust as needed
    const IMAGE_HEIGHT = 64; // Adjust as needed

    const IMAGE_WIDTH_BYTES = Math.ceil(IMAGE_WIDTH / 8);

    // Mode: This is just an example value; adjust as per your printer's specification.
    const mode = "\x33";

    const pL = String.fromCharCode(IMAGE_WIDTH_BYTES & 0xFF);
    const pH = String.fromCharCode((IMAGE_WIDTH_BYTES >> 8) & 0xFF);
    const hL = String.fromCharCode(IMAGE_HEIGHT & 0xFF);
    const hH = String.fromCharCode((IMAGE_HEIGHT >> 8) & 0xFF);

    const initCommand = "\x1B\x40\x1B\x61\x01";

    const bitmapCommand = "\x1D\x76\x30" + mode + pL + pH + hL + hH;

    const logoToBeSent = initCommand + bitmapCommand + logo_hex;

    return base64.encode(logoToBeSent);
}
